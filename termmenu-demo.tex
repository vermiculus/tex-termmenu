% -*- expl3 -*-
% (prog1 (load "/Users/sean/github/auctex/expl3.el") (expl3-mode))
\input expl3-generic \relax \ExplSyntaxOn
\input termmenu \relax % \file_input:n { termmenu }

\termmenu_new:N \l_tmpa_termmenu
\termmenu_set_name:Nn \l_tmpa_termmenu { Demo }
 
\termmenu_add:Nnnn \l_tmpa_termmenu { h, ?, help }
  { Display~extended~help~for~this~menu. }
  { \msg_term:n { Choose~an~animal~to~hear~its~sound. } }
 
\termmenu_add:Nnnn \l_tmpa_termmenu { l, lion }
  { Roar~like~a~lion. }
  { \msg_term:n { Roar! } }
 
\termmenu_add:Nnnn \l_tmpa_termmenu { d, dog }
  { Bark~like~a~dog. }
  { \msg_term:n { Bark! } }
 
\termmenu_add:Nnnn \l_tmpa_termmenu { k, duck }
  { Oh,~you~know...~:) }
  { \msg_term:n { Quack! } }

\termmenu_add:Nnnn \l_tmpa_termmenu { t, long }
  {
    Write~an~excessively~long~message~to~the~terminal.~
    This~can~be~used~to~test~line-wrapping~functionality.~
    I~wouldn't~use~this~too~often.
  }
  { \msg_term:n { Wow,~all~of~that~for~nothing. } }

% a: input; b: output
\termmenu_do:NNN \l_tmpa_termmenu \l_tmpa_tl \l_tmpb_tl

\msg_term:n { input~was~`\tl_use:N \l_tmpa_tl' }

\quark_if_no_value:NT \l_tmpb_tl
  { \msg_term:n { Whoops! } }
  { \tl_use:N \l_tmpb_tl }

\termmenu_do:N \l_tmpa_termmenu

\bye
